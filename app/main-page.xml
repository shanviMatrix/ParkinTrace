<Page 
    xmlns="http://schemas.nativescript.org/tns.xsd"
    xmlns:sd="nativescript-ui-sidedrawer"
    navigatingTo="onNavigatingTo" 
    navigatingFrom="onNavigatingFrom">

    <ActionBar class="modern-actionbar">
        <GridLayout columns="auto, *, auto" width="100%">
            <Label col="0" text="â˜°" tap="toggleDrawer" class="menu-icon" />
            <StackLayout col="1" orientation="horizontal" horizontalAlignment="center">
                <Label text="ParkinTrace" class="app-logo" />
            </StackLayout>
            <Label col="2" text="ðŸ””" class="notification-icon" tap="onNotificationTap" />
        </GridLayout>
    </ActionBar>

    <sd:RadSideDrawer id="drawer" drawerLocation="Left">

        <sd:RadSideDrawer.drawerContent>
            <ScrollView>
                <StackLayout class="drawer-content">
                    <StackLayout class="drawer-profile">
                        <Label text="ðŸ‘¤" fontSize="50" horizontalAlignment="center" marginBottom="10" />
                        <Label text="{{ userName }}" class="drawer-profile-name" />
                        <Label text="ID: {{ patientId }}" class="drawer-profile-id" />
                    </StackLayout>
                    
                    <StackLayout class="drawer-menu">
                        <Label text="ðŸ“‹ My Profile" class="drawer-link" tap="onProfileTap" />
                        <Label text="ðŸ‘¨â€âš•ï¸ My Doctor" class="drawer-link" tap="onDoctorPageTap" />
                        <Label text="ðŸ“Š Health Charts" class="drawer-link" tap="onHealthChartsTap" />
                        <Label text="ðŸ“š Learn about Parkinson's" class="drawer-link" tap="onLearnTap" />
                        <Label text="ðŸ’¬ Send Feedback" class="drawer-link" tap="onFeedbackTap" />
                        <Label text="âš™ï¸ Settings" class="drawer-link" tap="onSettingsTap" />
                        <Label text="ðŸšª Logout" class="drawer-link drawer-logout" tap="onLogoutTap" />
                    </StackLayout>
                </StackLayout>
            </ScrollView>
        </sd:RadSideDrawer.drawerContent>

        <sd:RadSideDrawer.mainContent>
            
            <GridLayout rows="*, auto">
                
                <ScrollView row="0">
                    <StackLayout padding="0" class="main-container">
                        
                        <!-- Hero Section with Greeting -->
                        <StackLayout class="hero-section">
                            <Label text="{{ greetingText }}" class="greeting-text" />
                            <Label text="{{ userName }}" class="greeting-name" />
                            <Label text="Your health is being monitored" class="greeting-subtitle" />
                        </StackLayout>

                        <!-- Quick Status Cards -->
                        <GridLayout columns="*, *" rows="auto" class="status-cards-container">
                            <StackLayout col="0" class="mini-card status-good">
                                <Label text="âœ“" class="status-icon" />
                                <Label text="Vitals Normal" class="status-text" />
                            </StackLayout>
                            <StackLayout col="1" class="mini-card status-monitoring">
                                <Label text="ðŸ“¡" class="status-icon" />
                                <Label text="Monitoring" class="status-text" />
                            </StackLayout>
                        </GridLayout>

                        <!-- Live Vitals with Charts -->
                        <Label text="Live Vitals" class="section-title-modern" />
                        
                        <!-- Heart Rate Card with Mini Chart -->
                        <StackLayout class="vital-card-modern" tap="onCardTap">
                            <GridLayout columns="auto, *, auto" rows="auto">
                                <StackLayout col="0" class="vital-icon-container">
                                    <Label text="â¤ï¸" fontSize="32" />
                                </StackLayout>
                                <StackLayout col="1" paddingLeft="15">
                                    <Label text="Heart Rate" class="vital-label-modern" />
                                    <StackLayout orientation="horizontal">
                                        <Label text="{{ heartRate }}" class="vital-value-modern" />
                                        <Label text="bpm" class="vital-unit-modern" />
                                    </StackLayout>
                                    <Label text="Normal range: 60-100" class="vital-range" />
                                </StackLayout>
                                <Label col="2" text="ðŸ“Š" fontSize="24" class="chart-indicator" />
                            </GridLayout>
                            <!-- Mini Sparkline Placeholder -->
                            <StackLayout class="sparkline-container">
                                <Label text="â–â–‚â–ƒâ–…â–„â–ƒâ–„â–…â–†â–…â–„â–ƒâ–‚â–" class="sparkline-text" />
                            </StackLayout>
                        </StackLayout>

                        <!-- Blood Oxygen Card -->
                        <StackLayout class="vital-card-modern" tap="onOxygenCardTap">
                            <GridLayout columns="auto, *, auto" rows="auto">
                                <StackLayout col="0" class="vital-icon-container">
                                    <Label text="ðŸ«" fontSize="32" />
                                </StackLayout>
                                <StackLayout col="1" paddingLeft="15">
                                    <Label text="Blood Oxygen" class="vital-label-modern" />
                                    <StackLayout orientation="horizontal">
                                        <Label text="{{ oxygen }}" class="vital-value-modern" />
                                        <Label text="%" class="vital-unit-modern" />
                                    </StackLayout>
                                    <Label text="Normal: 95-100%" class="vital-range" />
                                </StackLayout>
                                <Label col="2" text="ðŸ“Š" fontSize="24" class="chart-indicator" />
                            </GridLayout>
                            <StackLayout class="sparkline-container">
                                <Label text="â–„â–…â–…â–†â–†â–…â–…â–†â–†â–…â–„â–…â–…â–†" class="sparkline-text" />
                            </StackLayout>
                        </StackLayout>

                        <!-- Alert Cards -->
                        <GridLayout columns="*, *" rows="auto">
                            <StackLayout col="0" class="{{ tremorStatusClass }}" tap="onTremorDetailTap">
                                <Label text="ðŸ¤" fontSize="28" />
                                <Label text="Tremor" class="card-title-small" />
                                <Label text="{{ tremor }}" class="card-status-text" /> 
                            </StackLayout>
                            
                            <StackLayout col="1" class="{{ fallStatusClass }}" tap="onFallDetailTap">
                                <Label text="ðŸš¨" fontSize="28" />
                                <Label text="Fall Alert" class="card-title-small" />
                                <Label text="{{ fall }}" class="card-status-text" /> 
                            </StackLayout>
                        </GridLayout>

                        <!-- Today's Activity Summary -->
                        <Label text="Today's Summary" class="section-title-modern" />
                        <GridLayout columns="*, *, *" rows="auto" class="activity-summary">
                            <StackLayout col="0" class="summary-stat">
                                <Label text="0" class="summary-number" />
                                <Label text="Falls" class="summary-label" />
                            </StackLayout>
                            <StackLayout col="1" class="summary-stat">
                                <Label text="{{ tremorCount }}" class="summary-number" />
                                <Label text="Tremors" class="summary-label" />
                            </StackLayout>
                            <StackLayout col="2" class="summary-stat">
                                <Label text="8:32" class="summary-number" />
                                <Label text="Hours" class="summary-label" />
                            </StackLayout>
                        </GridLayout>

                        <!-- Quick Actions -->
                        <Label text="Quick Actions" class="section-title-modern" />
                        <GridLayout columns="*, *" rows="auto, auto">
                            <StackLayout col="0" row="0" class="action-card" tap="onMedicationTap">
                                <Label text="ðŸ’Š" fontSize="32" />
                                <Label text="Medication" class="action-text" />
                            </StackLayout>
                            <StackLayout col="1" row="0" class="action-card" tap="onExerciseTap">
                                <Label text="ðŸƒ" fontSize="32" />
                                <Label text="Exercise" class="action-text" />
                            </StackLayout>
                            <StackLayout col="0" row="1" class="action-card" tap="onHealthChartsTap">
                                <Label text="ðŸ“Š" fontSize="32" />
                                <Label text="Reports" class="action-text" />
                            </StackLayout>
                            <StackLayout col="1" row="1" class="action-card" tap="onAppointmentsTap">
                                <Label text="ðŸ“…" fontSize="32" />
                                <Label text="Appointments" class="action-text" />
                            </StackLayout>
                        </GridLayout>

                    </StackLayout>
                </ScrollView>

                <!-- Bottom Action Buttons -->
                <StackLayout row="1" orientation="vertical" class="bottom-actions">
                    <Button text="ðŸ“ž Connect to Doctor" class="doctor-button-modern" tap="onDoctorTap" />
                    <Button text="ðŸ†˜ Emergency SOS" class="sos-button-modern" tap="onSOSTap" />
                </StackLayout>
                
            </GridLayout>

        </sd:RadSideDrawer.mainContent>
    </sd:RadSideDrawer>
</Page>